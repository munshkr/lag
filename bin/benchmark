#!/usr/bin/env ruby

require 'bundler/setup'
require 'benchmark'
require 'lug/logger'
require 'lug/tty_logger'
require 'logger'

null_io = File.open(File::NULL, 'a')
TOTAL = 100_000

Benchmark.bmbm do |x|
  logger = Logger.new(null_io)
  x.report('Logger#debug') { TOTAL.times { |i| logger.debug(i) } }

  lug = Lug::Logger.new(nil, null_io)
  x.report('Lug::Logger#debug') { TOTAL.times { |i| lug.debug(i) } }
  x.report('Lug::Logger#log') { TOTAL.times { |i| lug << i } }

  lug = Lug::Logger.new(:main, null_io)
  x.report('Lug::Logger#debug (w/ ns)') { TOTAL.times { |i| lug.debug(i) } }
  x.report('Lug::Logger#log (w/ ns)') { TOTAL.times { |i| lug << i } }

  lug = Lug::TtyLogger.new(nil, null_io)
  x.report('Lug::TtyLogger#debug') { TOTAL.times { |i| lug.debug(i) } }
  x.report('Lug::TtyLogger#log') { TOTAL.times { |i| lug << i } }

  lug = Lug::TtyLogger.new(:main, null_io)
  x.report('Lug::TtyLogger#debug (w/ ns)') { TOTAL.times { |i| lug.debug(i) } }
  x.report('Lug::TtyLogger#log (w/ ns)') { TOTAL.times { |i| lug << i } }
end
