#!/usr/bin/env ruby

require 'bundler/setup'
require 'benchmark'
require 'lug/logger'
require 'logger'

null_io = File.open(File::NULL, 'a')
N = 100_000

Benchmark.bmbm do |x|
  logger = Logger.new(null_io)
  x.report('Logger#debug') do
    N.times { |i| logger.debug(i) }
  end

  lug = Lug::Logger.new(null_io)
  x.report('Lug::Logger#log') do
    N.times { |i| lug << i }
  end

  lug = Lug::Logger.new(null_io).on(:main)
  x.report('Lug::Logger#log (w/ns)') do
    N.times { |i| lug << i }
  end

  lug = Lug::TtyLogger.new(null_io)
  x.report('Lug::TtyLogger#log') do
    N.times { |i| lug << i }
  end

  lug = Lug::TtyLogger.new(null_io).on(:main)
  x.report('Lug::TtyLogger#log (w/ns)') do
    N.times { |i| lug << i }
  end

  require 'lug/standard'

  lug = Lug::Logger.new(null_io)
  x.report('Lug::Logger#debug + Standard') do
    N.times { |i| lug.debug(i) }
  end

  lug = Lug::Logger.new(null_io).on(:main)
  x.report('Lug::Logger#debug + Standard (w/ns)') do
    N.times { |i| lug.debug(i) }
  end

  lug = Lug::TtyLogger.new(null_io)
  x.report('Lug::TtyLogger#debug + Standard') do
    N.times { |i| lug.debug(i) }
  end

  lug = Lug::TtyLogger.new(null_io).on(:main)
  x.report('Lug::TtyLogger#debug + Standard (w/ns)') do
    N.times { |i| lug.debug(i) }
  end
end
